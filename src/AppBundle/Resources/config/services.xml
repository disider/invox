<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="company_manager.class">AppBundle\Entity\Manager\CompanyManager</parameter>
        <parameter key="directory_subscriber.class">AppBundle\Pagination\DirectorySubscriber</parameter>
        <parameter key="document_builder.class">AppBundle\Builder\DocumentBuilder</parameter>
        <parameter key="locale_formatter.class">AppBundle\Model\LocaleFormatter</parameter>
        <parameter key="mailer.default_mailer.class">AppBundle\Mailer\DefaultMailer</parameter>
        <parameter key="protocol_generator.class">AppBundle\Helper\ProtocolGenerator</parameter>
        <parameter key="places_manager.class">AppBundle\Helper\PlacesManager</parameter>
        <parameter key="user_manager.class">AppBundle\Entity\Manager\UserManager</parameter>
        <parameter key="user.class">AppBundle\Entity\User</parameter>
        <parameter key="csv_to_array.class">AppBundle\Helper\CsvToArray</parameter>
        <parameter key="parameter_helper.class">AppBundle\Helper\ParameterHelper</parameter>

        <parameter key="mailer.emails" type="collection">
            <parameter key="no-reply">%noreply_email%</parameter>
            <parameter key="info">%info_email%</parameter>
        </parameter>

        <parameter key="mailer.display_names" type="collection">
            <parameter key="no-reply">%noreply_display_name%</parameter>
            <parameter key="info">%info_display_name%</parameter>
        </parameter>

    </parameters>

    <services>
        <service id="company_manager" class="%company_manager.class%" public="true">
            <argument type="service" id="company_repository"/>
            <argument type="service" id="security.token_storage"/>
            <argument type="service" id="session"/>
        </service>

        <service id="default_mailer" class="%mailer.default_mailer.class%">
            <argument type="service" id="templating"/>
            <argument type="service" id="router"/>
            <argument type="service" id="swiftmailer.mailer"/>
            <argument type="service" id="translator"/>
            <argument>%mailer.display_names%</argument>
            <argument>%mailer.emails%</argument>
        </service>

        <service id="directory_subscriber" class="%directory_subscriber.class%">
            <tag name="knp_paginator.subscriber" />
        </service>

        <service id="document_builder" class="%document_builder.class%">
            <argument type="service" id="twig"/>
            <argument>%kernel.cache_dir%</argument>
        </service>

        <service id="locale_formatter" class="%locale_formatter.class%" public="true">
            <argument type="service" id="translator.default"/>
            <argument>%locale%</argument>
        </service>

        <service id="protocol_generator" class="%protocol_generator.class%" public="true">
            <argument type="service" id="doctrine.orm.entity_manager"/>
        </service>

        <service id="places_manager" class="%places_manager.class%" public="true">
            <argument type="service" id="doctrine.orm.entity_manager"/>
        </service>

        <service id="registration.form.type" class="AppBundle\Form\RegistrationForm">
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <tag name="form.type" alias="user_registration"/>
        </service>

        <service id="user_manager" class="%user_manager.class%">
            <argument type="service" id="security.encoder_factory"/>
            <argument type="service" id="doctrine.orm.entity_manager"/>
            <argument>%user.class%</argument>
        </service>

        <service id="csv_to_array" class="%csv_to_array.class%">
        </service>

        <service id="parameter_helper" class="%parameter_helper.class%">
            <argument type="service" id="service_container"/>
        </service>

    </services>

</container>
